{
    "version": "0.4.1",
    "description": "test sourceMap with when mapping",
    "name": "test when mapping",
    "templates": [
        {
            "name": "shipmentDetails",
            "row": {
                "colFamily": "fp",
                "cols": [
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "headersource_",
                        "value": "$.header.source"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "headercategory_",
                        "value": "$.header.category"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "headerversion_",
                        "value": "$.header.version"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "headerrequestid_",
                        "value": "$.header.requestId"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "headertimestamp_",
                        "value": "$.header.timestamp"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "bol_",
                        "value": "$.data.bol"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "carrier_",
                        "value": "$.data.carrier"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "consigneename_",
                        "value": "$.data.consigneeName"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "consigneeaddress_",
                        "value": "$.data.consigneeAddress"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "consigneecity_",
                        "value": "$.data.consigneeCity"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "consigneecountry_",
                        "value": "$.data.consigneeCountry"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "consigneestate_",
                        "value": "$.data.consigneeState"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "consigneepostalcode_",
                        "value": "$.data.consigneePostalCode"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "contents_",
                        "value": "$.data.contents"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "containernbr_",
                        "value": "if ( $.data.containerNbr[0] != '' ) then $.data.containerNbr[0]  else if ( $.data.containerNbr != '' ) then $.data.containerNbr  else ''"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "containerload_",
                        "value": "$.data.containerLoad"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "currency_",
                        "value": "$.data.currency"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "destinationairportcode_",
                        "value": "$.data.destinationAirportCode"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "demensionalweight_",
                        "value": "$.data.financialWeight"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "etdpointoforigin_",
                        "value": "$.data.etdPointOfOrigin"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "etaportofdestination_",
                        "value": "$.data.etaPortOfDestination"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "etafinaldestination_",
                        "value": "$.data.etaFinalDestination"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "finaldestination_",
                        "value": "$.data.finalDestination"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "hawb_",
                        "value": "$.data.hawb"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "mawb_",
                        "value": "$.data.mawb"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "invoicedate_",
                        "value": "$.data.invoiceDate"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "invoicenumber_",
                        "value": "$.data.invoiceNumber"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "invoicecountry_",
                        "value": "$.data.invoiceCountry_"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "originairportcode_",
                        "value": "$.data.originAirportCode"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "origincity_",
                        "value": "$.data.originCity"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "palletqty_",
                        "value": "$.data.palletQty"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "weight_",
                        "value": "$.data.weight"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "projectId",
                        "value": "$.data.projectId"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "servicelevel_",
                        "value": "$.data.serviceLevel"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "servicetype_",
                        "value": "$.data.serviceType"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "suppliername_",
                        "value": "$.data.supplierName"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "supplieraddress_",
                        "value": "$.data.supplierAddress"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "suppliercity_",
                        "value": "$.data.supplierCity"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "suppliercountry_",
                        "value": "$.data.supplierCountry"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "supplierstate_",
                        "value": "$.data.supplierState"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "supplierpostalcode_",
                        "value": "$.data.supplierPostalCode"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "hpeshipmentreference_",
                        "value": "if ( $.data.shipmentReference[0] != '' ) then $.data.shipmentReference[0]  else if ( $.data.shipmentReference != '' ) then $.data.shipmentReference  else ''"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "totalcost_",
                        "value": "$.data.totalCost"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "totalcostusd_",
                        "value": "$.data.totalCostUsd_"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "shipmenttype_",
                        "value": "$.data.shipmentType"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "qcteventremark_",
                        "value": "$.data.qctEventRemark"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "hpepartnumber_",
                        "value": "$.data.hpePartNumber"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": false,
                        "name": "qtyshipped_",
                        "value": "$.data.qtyShipped"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "elfclassifier_",
                        "value": "if ( ( concat( toLower( $.data.vendor ) , concat( '-', $.data.projectId )) == 'expeditors-1') ||      ( ( concat( toLower( $.data.vendor ) , concat( '-', $.data.projectId )) == 'schenker-WWPAN8') ||        ( concat( toLower( $.data.vendor ) , concat( '-', $.data.projectId )) == 'nippon-true') )    ) then 'ELF' else 'Non-ELF'"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "shippingmode_",
                        "value": "if ( toLower( $.data.shippingMode ) != '') then $.data.shippingMode else if ( toLower( $.data.vendor ) == 'upsair') then 'air' else if ( toLower( $.data.vendor ) == 'ups') then 'parcel' else if ( toLower( $.data.vendor ) == 'dhlgf') then 'air' else if ( toLower( $.data.vendor ) == 'dhlexpress') then 'parcel' else 'unknown'"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "shipperreferencenumber_",
                        "value": "$.data.lspTrackingId"
                    },
                    {
                        "colFamily": "fp",
                        "isDedup": true,
                        "name": "vendor",
                        "value": "$.data.vendor"
                    }
                ],
                "name": "details_event",
                "namespace": "test_logistics_bst",
                "rowKey": ["shipperreferencenumber_", "headersource_"],
                "tableName": "details_event"
            }
        }
    ],
    "sourceMap": [
        {
            "templates": [
                "shipmentDetails"
            ],
            "sourceName": "shipmentDetailsDhlDgf",
            "when": "( ( topic == 'shipmentDetails' ) && ( ( $.header.version == '1.0' ) && ( $.header.source == 'dhldgf' ) ) )",
            "idockey": ["$.header.timestamp"],
            "sortkey": ["$.header.timestamp", "$.header.category"]
        }
    ]
}
